{"version":3,"file":"commonHelpers.js","sources":["../src/js/notifications.js","../src/js/render.js","../src/js/download.js","../src/main.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst octagonIconUrl = new URL('../img/octagon.svg', import.meta.url).href;\nconst closeIconUrl = new URL('../img/x.svg', import.meta.url).href;\n\nexport function createMessage(textMessage = '') {\n  iziToast.show({\n    // title: 'Error',\n    titleColor: '#FFF',\n    titleSize: '16px',\n    message: textMessage,\n    messageColor: '#FFF',\n    messageSize: '16px',\n    maxWidth: '462px',\n    position: 'topRight',\n    backgroundColor: '#EF4040',\n    iconUrl: octagonIconUrl,\n    progressBarColor: '#FFBEBE',\n    timeout: 5000,\n    targetFirst: false,\n    close: false,\n    buttons: [\n      [\n        `<button type=\"button\" id=\"izi-close-button\">\n                 <img src=\"${closeIconUrl}\" alt=\"\" width=\"16px\" height=\"16px\" />\n              </button>`,\n        function (instance, toast) {\n          instance.hide({}, toast, 'buttonName');\n        },\n      ],\n    ],\n  });\n\n  // div самого вікна\n  let messageElement = document.querySelector('.iziToast.fadeInUp');\n  messageElement.style.paddingTop = '20px';\n  messageElement.style.paddingBottom = '20px';\n\n  // текст помилки\n  messageElement = document.querySelector(\n    '.iziToast>.iziToast-body .iziToast-texts'\n  );\n  messageElement.style.maxWidth = '322px';\n}\n","import { createMessage } from './notifications';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryEl = document.querySelector('.gallery');\n\nexport const gallery = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionSelector: 'img',\n  captionType: 'attr',\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n});\n\nexport function renderImages(images, isLoadMore) {\n  if (images.hits.length === 0) {\n    createMessage(\n      'Sorry, there are no images matching your search query. Please try again!'\n    );\n    return;\n  }\n\n  if (!isLoadMore) galleryEl.innerHTML = '';\n\n  const galleryHTML = images.hits.reduce((acc, imageEl) => {\n    return (acc += `\n        <a class=\"gallery-link\" href=\"${imageEl.largeImageURL}\">\n          <img\n              class=\"gallery-image\"\n              src=\"${imageEl.webformatURL}\"\n              alt=\"${imageEl.tags}\"\n          />\n          <ul class=\"property-list\">\n            <li class=\"property-item\">\n                <p class=\"property-title\">Likes</p>\n                <p class=\"property-value\">${imageEl.likes}</p>\n            </li>\n            <li class=\"property-item\">\n                <p class=\"property-title\">Views</p>\n                <p class=\"property-value\">${imageEl.views}</p>\n            </li>\n            <li class=\"property-item\">\n                <p class=\"property-title\">Comments</p>\n                <p class=\"property-value\">${imageEl.comments}</p>\n            </li>\n            <li class=\"property-item\">\n                <p class=\"property-title\">Downloads</p>\n                <p class=\"property-value\">${imageEl.downloads}</p>\n            </li>\n          </ul>  \n          </a>`);\n  }, '');\n\n  galleryEl.insertAdjacentHTML('beforeend', galleryHTML);\n  gallery.refresh();\n}\n","import { renderImages } from './render';\nimport { createMessage } from './notifications';\nimport axios from 'axios';\n\nconst searchParams = {\n  key: '41895338-dd09ccecf51e6c3f0d3351286',\n  q: '',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  per_page: 40,\n  page: 1,\n};\n\nconst searchBtn = document.querySelector('.search-btn');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\nconst searchLoadingTextEl = document.querySelector('.main-load');\nconst moreLoadingTextEl = document.querySelector('.more-load');\n\nexport async function downloadImages(searchKey, isLoadMore = false) {\n  if (isLoadMore) {\n    moreLoadingTextEl.style.display = 'block';\n    loadMoreBtn.style.display = 'none';\n    loadMoreBtn.blur();\n\n    if (searchParams.page === 1) searchParams.page++;\n  } else {\n    searchLoadingTextEl.style.display = 'block';\n    searchBtn.disabled = true;\n    searchBtn.blur();\n\n    searchParams.page = 1;\n  }\n\n  searchParams.q = searchKey;\n  let isDownloarError = false;\n  let totalHits = 0;\n  try {\n    const images = await fetchImages();\n    totalHits = images.totalHits;\n    renderImages(images, isLoadMore);\n  } catch (error) {\n    createMessage(error);\n    isDownloarError = true;\n  }\n\n  if (isLoadMore) {\n    if (!isDownloarError) {\n      searchParams.page++;\n\n      const elementRect = document\n        .querySelector('.gallery-link')\n        .getBoundingClientRect();\n      window.scrollBy({\n        top: elementRect.height * 2.0,\n        left: 0,\n        behavior: 'smooth',\n      });\n\n      if (searchParams.per_page * searchParams.page >= totalHits)\n        createMessage(\n          \"We're sorry, but you've reached the end of search results.\"\n        );\n      else loadMoreBtn.style.display = 'flex';\n    } else loadMoreBtn.style.display = 'flex';\n\n    moreLoadingTextEl.style.display = 'none';\n  } else {\n    searchLoadingTextEl.style.display = 'none';\n    searchBtn.disabled = false;\n    loadMoreBtn.style.display = 'flex';\n  }\n}\n\nasync function fetchImages() {\n  const response = await axios.get('https://pixabay.com/api/', {\n    params: { ...searchParams },\n  });\n\n  return response.data;\n}\n","import { createMessage } from './js/notifications';\nimport { downloadImages } from './js/download';\n\nconst formEl = document.querySelector('.search-form');\nconst loadMoreBtn = document.querySelector('.load-more-btn');\n\ndocument.querySelector('.main-load').style.display = 'none';\ndocument.querySelector('.more-load').style.display = 'none';\nloadMoreBtn.style.display = 'none';\n\nlet searchKey;\n\nformEl.addEventListener('submit', event => {\n  event.preventDefault();\n\n  searchKey = formEl.elements.search.value.trim();\n  if (!searchKey) {\n    createMessage('Search must be filled!');\n    return;\n  }\n  formEl.reset();\n\n  downloadImages(searchKey);\n});\n\nloadMoreBtn.addEventListener('click', () => {\n  downloadImages(searchKey, true);\n});\n"],"names":["octagonIconUrl","closeIconUrl","createMessage","textMessage","iziToast","instance","toast","messageElement","galleryEl","gallery","SimpleLightbox","renderImages","images","isLoadMore","galleryHTML","acc","imageEl","searchParams","searchBtn","loadMoreBtn","searchLoadingTextEl","moreLoadingTextEl","downloadImages","searchKey","isDownloarError","totalHits","fetchImages","error","elementRect","axios","formEl","event"],"mappings":"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"}